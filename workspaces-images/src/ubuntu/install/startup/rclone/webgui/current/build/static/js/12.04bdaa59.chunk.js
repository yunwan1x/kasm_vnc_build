(this["webpackJsonp@rclone/rclone-webui-react"]=this["webpackJsonp@rclone/rclone-webui-react"]||[]).push([[12],{276:function(e,t,a){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(n=(s=l.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(i){r=!0,o=i}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"===typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a.d(t,"a",(function(){return r}))},278:function(e,t,a){"use strict";var n=a(4);n.oneOfType([n.shape({Features:n.object.isRequired,Hashes:n.array.isRequired,Name:n.string.isRequired,Precision:n.number.isRequired,String:n.string.isRequired}),n.object]),n.shape({remoteName:n.string.isRequired,remotePath:n.string.isRequired}),n.string,n.bool,n.bool,n.shape({Path:n.string.isRequired,Name:n.string.isRequired,Size:n.number,MimeType:n.string,ModTime:n.string.isRequired,IsDir:n.bool.isRequired}),n.shape({rate:n.string.isRequired})},280:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"h",(function(){return l})),a.d(t,"d",(function(){return i})),a.d(t,"g",(function(){return u})),a.d(t,"l",(function(){return c})),a.d(t,"k",(function(){return p})),a.d(t,"j",(function(){return m})),a.d(t,"i",(function(){return d})),a.d(t,"f",(function(){return f})),a.d(t,"a",(function(){return h})),a.d(t,"n",(function(){return y})),a.d(t,"m",(function(){return b})),a.d(t,"e",(function(){return g}));var n=a(2),r=a(283);const o=(e,t,a)=>r=>{r({type:n.j,id:e,remoteName:t,remotePath:a}),r(l(e))},s=(e,t)=>a=>{a({type:n.k,remoteName:t,id:e,remotePath:""}),a(l(e))},l=e=>(t,a)=>{const n=a().explorer.currentPaths[e],o=n.remoteName,s=n.remotePath;o&&""!==o&&t(Object(r.e)(o,s))},i=(e,t)=>a=>{a({type:n.l,id:e,remotePath:t}),a(l(e))},u=e=>t=>{t({type:n.q,id:e})},c=e=>t=>{t({type:n.I,id:e})},p=e=>t=>{t({type:n.F,id:e}),t(l(e))},m=e=>t=>{t({type:n.E,id:e}),t(l(e))},d=e=>t=>{t({type:n.D,id:e}),t(l(e))},f=(e,t)=>a=>{a({type:n.o,id:e,filter:t})},h=(e,t)=>a=>{a({type:n.f,id:e,mode:t})},y=(e,t)=>a=>{a({type:n.m,id:e,searchQuery:t})},b=(e,t)=>a=>{a({type:n.i,id:e,payload:t})},g=(e,t,a)=>r=>{r({type:n.n,id:e,payload:{sortFilter:t,sortFilterAscending:a}})}},283:function(e,t,a){"use strict";a.d(t,"f",(function(){return l})),a.d(t,"g",(function(){return i})),a.d(t,"e",(function(){return u})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return p})),a.d(t,"h",(function(){return m})),a.d(t,"b",(function(){return d})),a.d(t,"c",(function(){return f}));var n=a(2),r=a(61),o=a(280),s=a(284);const l=e=>t=>{Object(s.getRemoteInfo)(e).then(a=>{t({type:n.v,status:n.L,payload:{[e.split(":")[0]]:a}})},e=>t({type:n.v,status:n.J,payload:e}))},i=()=>(e,t)=>{Object(s.getAllRemoteNames)().then(t=>e({type:n.A,status:n.L,payload:t.remotes}),t=>e({type:n.A,status:n.J,payload:t}))},u=(e,t)=>a=>{if(""!==e){const r="".concat(e,"-").concat(t);Object(s.getFilesList)(e,t).then(e=>a({type:n.w,status:n.L,payload:{path:r,filesList:e.list}}),e=>a({type:n.w,status:n.J,payload:{path:r,error:e}}))}},c=(e,t)=>a=>{if(!e||e<0)throw new Error("Invalid number of cols:".concat(e));a({type:n.h,payload:{numCols:e,mode:t}})},p=e=>t=>{const a=Object(r.l)(3);t(Object(o.g)(a)),t(d(a,e)),t({type:n.a,payload:{containerID:a,paneID:e}})},m=(e,t)=>a=>{a(Object(o.l)(e)),a({type:n.G,payload:{containerID:e,paneID:t}})},d=(e,t)=>a=>{a({type:n.b,payload:{containerID:e,paneID:t}})},f=e=>t=>{t({type:n.e,payload:e})}},291:function(e,t,a){"use strict";var n=a(7),r=a(10),o=a(274),s=a(16),l=a(0),i=a.n(l),u=a(4),c=a.n(u),p=a(24),m=a.n(p),d=a(27),f={children:c.a.node,inline:c.a.bool,tag:d.q,innerRef:c.a.oneOfType([c.a.object,c.a.func,c.a.string]),className:c.a.string,cssModule:c.a.object},h=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(o.a)(a)),a.submit=a.submit.bind(Object(o.a)(a)),a}Object(s.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.submit=function(){this.ref&&this.ref.submit()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,o=e.inline,s=e.tag,l=e.innerRef,u=Object(r.a)(e,["className","cssModule","inline","tag","innerRef"]),c=Object(d.m)(m()(t,!!o&&"form-inline"),a);return i.a.createElement(s,Object(n.a)({},u,{ref:l,className:c}))},t}(l.Component);h.propTypes=f,h.defaultProps={tag:"form"},t.a=h},334:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(325),s=a.n(o);const l=(e,t)=>{const a=t.trim().toLowerCase(),n=a.length;return 0===n?e:0===n?[]:e.filter(e=>e.toLowerCase().slice(0,n)===a)},i=e=>e,u=e=>r.a.createElement("div",null,r.a.createElement("i",{className:"fa fa-lg fa-hdd-o"})," ",e);class c extends r.a.Component{constructor(e){super(e),this.onSuggestionsFetchRequested=({value:e})=>{this.setState({suggestions:l(this.props.suggestions,e)})},this.onSuggestionsClearRequested=()=>{this.setState({suggestions:[]})},this.state={suggestions:[]}}render(){const e=this.props,t={placeholder:"Type the name of remote you want to open",value:e.value,onChange:e.onChange};return r.a.createElement(s.a,{suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:i,renderSuggestion:u,alwaysRenderSuggestions:!0,highlightFirstSuggestion:!0,inputProps:t,style:{width:"100%"}})}}var p=c,m=a(84),d=a(283),f=a(280),h=a(291),y=a(41),b=a(293);a(278);class g extends r.a.Component{constructor(e){super(e),this.shouldUpdateRemoteName=(e,{newValue:t})=>{0===t.indexOf("/")?this.setState({remoteName:t,openButtonText:"Open local path"}):this.setState({remoteName:t,openButtonText:"Open"})},this.openRemote=e=>{e.preventDefault();(0,this.props.handleChangeRemoteName)(this.state.remoteName)},this.state={isEmpty:!1,remoteName:e.remoteName,openEnabled:!1,openButtonText:"Open"}}componentDidMount(){this.props.getRemoteNames()}render(){const e=this.state,t=e.isEmpty,a=e.remoteName,n=this.props.remotes;return this.props.hasError?r.a.createElement("div",null,"Error loading remotes. Please try again."):t?r.a.createElement("div",null,"Add some remotes to see them here ",r.a.createElement("span",{role:"img","aria-label":"sheep"},"\ud83d\udc11"),"."):r.a.createElement(h.a,{onSubmit:this.openRemote,className:"row"},r.a.createElement(y.a,{xs:12,sm:10,lg:10},r.a.createElement(p,{value:a,onChange:this.shouldUpdateRemoteName,suggestions:n})),r.a.createElement(y.a,{xs:12,sm:2,lg:2},r.a.createElement(b.a,{className:"btn-lg",color:"success"},this.state.openButtonText)))}}g.defaultProps={};t.a=Object(m.b)((e,t)=>({remotes:e.remote.remotes,hasError:!1,error:e.remote.error,currentPath:e.explorer.currentPaths[t.containerID]}),{getRemoteNames:d.g,getFsInfo:d.f,changeRemoteName:f.c})(g)},373:function(e,t,a){"use strict";var n=a(7),r=a(10),o=a(0),s=a.n(o),l=a(4),i=a.n(l),u=a(24),c=a.n(u),p=a(27),m={children:i.a.node,tag:p.q,className:i.a.string,cssModule:i.a.object,valid:i.a.bool,tooltip:i.a.bool},d={tag:"div",valid:void 0},f=function(e){var t=e.className,a=e.cssModule,o=e.valid,l=e.tooltip,i=e.tag,u=Object(r.a)(e,["className","cssModule","valid","tooltip","tag"]),m=l?"tooltip":"feedback",d=Object(p.m)(c()(t,o?"valid-"+m:"invalid-"+m),a);return s.a.createElement(i,Object(n.a)({},u,{className:d}))};f.propTypes=m,f.defaultProps=d,t.a=f},374:function(e,t,a){"use strict";var n=a(7),r=a(10),o=a(0),s=a.n(o),l=a(4),i=a.n(l),u=a(24),c=a.n(u),p=a(27),m={className:i.a.string,cssModule:i.a.object,size:i.a.string,bordered:i.a.bool,borderless:i.a.bool,striped:i.a.bool,dark:i.a.bool,hover:i.a.bool,responsive:i.a.oneOfType([i.a.bool,i.a.string]),tag:p.q,responsiveTag:p.q,innerRef:i.a.oneOfType([i.a.func,i.a.string,i.a.object])},d=function(e){var t=e.className,a=e.cssModule,o=e.size,l=e.bordered,i=e.borderless,u=e.striped,m=e.dark,d=e.hover,f=e.responsive,h=e.tag,y=e.responsiveTag,b=e.innerRef,g=Object(r.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),v=Object(p.m)(c()(t,"table",!!o&&"table-"+o,!!l&&"table-bordered",!!i&&"table-borderless",!!u&&"table-striped",!!m&&"table-dark",!!d&&"table-hover"),a),E=s.a.createElement(h,Object(n.a)({},g,{ref:b,className:v}));if(f){var O=Object(p.m)(!0===f?"table-responsive":"table-responsive-"+f,a);return s.a.createElement(y,{className:O},E)}return E};d.propTypes=m,d.defaultProps={tag:"table",responsiveTag:"div"},t.a=d},642:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(84),s=a(60),l=a(41),i=a(293),u=a(374),c=a(62),p=a(43),m=a(2);const d=()=>e=>{c.a.post(p.a.listMounts).then(t=>{console.log(t),e({type:m.x,status:m.L,payload:t.data})},t=>{e({type:m.x,status:m.J,payload:t})})};var f=a(276),h=a(1),y=a(371),b=a(372),g=a(287),v=a(373),E=a(644),O=a(627),T=a(628),N=a(629),D=a(334);const j={CacheMaxAge:{Type:"int",Default:36e11},CacheMaxSize:{Type:"int",Default:-1,Help:""},CacheMode:{Type:"int",Options:[{value:"off",key:0},{value:"minimal",key:1},{value:"writes",key:2},{value:"full",key:3}],Default:0,Help:""},CachePollInterval:{Type:"int",Default:6e10,Help:""},CaseInsensitive:{Type:"bool",Default:!1,Help:""},ChunkSize:{Type:"int",Default:134217728,Help:""},ChunkSizeLimit:{Type:"int",Default:-1,Help:""},DirCacheTime:{Type:"int",Default:3e11,Help:""},DirPerms:{Type:"int",Default:511,Help:""},FilePerms:{Type:"int",Default:438,Help:""},GID:{Type:"int",Default:1e3,Help:""},NoChecksum:{Type:"bool",Default:!1,Help:""},NoModTime:{Type:"bool",Default:!1,Help:""},NoSeek:{Type:"bool",Default:!1,Help:""},PollInterval:{Type:"int",Default:6e10,Help:""},ReadAhead:{Type:"int",Default:0,Help:""},ReadOnly:{Type:"bool",Default:!1,Help:""},ReadWait:{Type:"int",Default:2e7,Help:""},UID:{Type:"int",Default:1e3,Help:""},Umask:{Type:"int",Default:2,Help:""},WriteBack:{Type:"int",Default:5e9,Help:""},WriteWait:{Type:"int",Default:1e9,Help:""}},M={AllowNonEmpty:{Type:"bool",Default:!1,Help:""},AllowOther:{Type:"bool",Default:!1,Help:""},AllowRoot:{Type:"bool",Default:!1,Help:""},AsyncRead:{Type:"bool",Default:!0,Help:""},AttrTimeout:{Type:"int",Default:1e9,Help:""},Daemon:{Type:"bool",Default:!1,Help:""},DaemonTimeout:{Type:"int",Default:0,Help:""},DebugFUSE:{Type:"bool",Default:!1,Help:""},DefaultPermissions:{Type:"bool",Default:!1,Help:""},ExtraFlags:{Type:"array",Default:[],Help:""},ExtraOptions:{Type:"array",Default:[],Help:""},MaxReadAhead:{Type:"int",Default:131072,Help:""},NoAppleDouble:{Type:"bool",Default:!0,Help:""},NoAppleXattr:{Type:"bool",Default:!1,Help:""},VolumeName:{Type:"string",Default:"",Help:""},WritebackCache:{Type:"bool",Default:!1,Help:""}};var R=a(61);const H=({attr:e,changeHandler:t,currentValues:a,isValidMap:n,errorsMap:o})=>{const s="".concat(e.Name),i=e.Required?r.a.createElement("i",{className:"text-red"},"*"):null,u=!Object(R.j)(e.Examples);let c=null,p="";return e.Options||"options"===p?(p="select",c=e.Options.map(e=>r.a.createElement("option",{key:e.key,value:e.key},e.value))):e.IsPassword?p="password":u?p="string":"bool"===e.Type?(p="select",c=[r.a.createElement("option",{key:1,value:!0},"Yes"),r.a.createElement("option",{key:2,value:!1},"No")]):p="int"===e.Type?"number":(e.Type,"text"),r.a.createElement(y.a,{row:!0},r.a.createElement(b.a,{for:e.Name,sm:5},s,i),r.a.createElement(l.a,{sm:7},r.a.createElement(g.a,{type:p,value:a[e.Name]||e.Default,name:e.Name,valid:n[e.Name],invalid:!n[e.Name],id:e.Name,onChange:t,required:e.Required},c),r.a.createElement(v.a,null,o[e.Name])))},C=({changeHandler:e,currentValues:t,isValidMap:a,errorsMap:n,options:o,setCurrentValues:s})=>{const l=[];for(const i in o)o.hasOwnProperty(i)&&l.push(r.a.createElement(H,{key:i,attr:Object(h.a)({Name:i},o[i]),changeHandler:a=>{a&&a.preventDefault(),e(a,o[i],t,s)},currentValues:t,errorsMap:n,isValidMap:a}));return l};var w=e=>{const t=e.buttonLabel,a=e.className,o=e.okHandle,u=Object(n.useState)(!1),c=Object(f.a)(u,2),p=c[0],m=c[1],d=Object(n.useState)(""),H=Object(f.a)(d,2),w=H[0],S=H[1],k=Object(n.useState)(""),P=Object(f.a)(k,2),q=P[0],A=P[1],x=Object(n.useState)((()=>{const e={};for(const t in j)e[t]="";for(const t in M)e[t]="";return e})()),I=Object(f.a)(x,2),F=I[0],L=I[1],V=Object(n.useState)((()=>{const e={};for(const t in j)e[t]=!0;for(const t in M)e[t]=!0;return e})()),U=Object(f.a)(V,2),z=U[0],J=U[1],W=Object(n.useState)({}),B=Object(f.a)(W,2),G=B[0],Q=B[1],X=Object(n.useState)({}),Y=Object(f.a)(X,2),$=Y[0],K=Y[1],Z=()=>m(!p),_=(e,t,a,n)=>{let r=e.target.name,o=e.target.value;const s=t.Type;"bool"===s?o="true"===o:"int"===s&&(o=parseInt(o)),n(Object(h.a)(Object(h.a)({},a),{},{[r]:o}));let l=!0,i="";"SizeSuffix"===s?(l=Object(R.q)(o),l||(i="The valid input is size( off | {unit}{metric} eg: 10G, 100M, 10G100M etc.)")):"Duration"===s?(l=Object(R.o)(o),l||(i="The valid input is time ({unit}{metric} eg: 10ms, 100m, 10h15ms etc.)")):"int"===s&&(l=Object(R.p)(o),l||(i="The valid input is int (100,200,300 etc)")),!t.Required||o&&""!==o||(l=!1,l||(i+=" This field is required")),L(Object(h.a)(Object(h.a)({},F),{},{[r]:i})),J(Object(h.a)(Object(h.a)({},z),{},{[r]:l}))};return r.a.createElement("div",{"data-test":"newMountModalComponent"},r.a.createElement(i.a,{color:"primary",onClick:Z},t),r.a.createElement(E.a,{isOpen:p,toggle:Z,className:a},r.a.createElement(O.a,{toggle:Z},"New Mount"),r.a.createElement(T.a,null,r.a.createElement(y.a,{row:!0},r.a.createElement(b.a,{for:"mountFs",sm:5},"Fs"),r.a.createElement(l.a,{sm:7},r.a.createElement(D.a,{remoteName:w,handleChangeRemoteName:S}),r.a.createElement(v.a,null))),w&&r.a.createElement(y.a,{row:!0},r.a.createElement(b.a,{for:"mountPoint",sm:5},"Mount Point"),r.a.createElement(l.a,{sm:7},r.a.createElement(g.a,{type:"text",value:q,name:"mountPoint",id:"mountPoint",onChange:e=>A(e.target.value),required:!0}),r.a.createElement(v.a,null))),r.a.createElement(s.a,null,r.a.createElement(l.a,{lg:6},r.a.createElement("p",null,"Mount Options"),r.a.createElement(C,{isValidMap:z,errorsMap:F,currentValues:$,setCurrentValues:K,changeHandler:_,options:M})),r.a.createElement(l.a,{lg:6},r.a.createElement("p",null,"VFS Options"),r.a.createElement(C,{isValidMap:z,errorsMap:F,currentValues:G,setCurrentValues:Q,changeHandler:_,options:j})))),r.a.createElement(N.a,null,r.a.createElement(i.a,{"data-test":"ok-button",color:"primary",onClick:()=>{if(!o)throw new Error("Ok handle is null");o(w,q,G,$)},disabled:!w||!q},"Create")," ",r.a.createElement(i.a,{"data-test":"cancel-button",color:"secondary",onClick:Z},"Cancel"))))};class S extends r.a.Component{constructor(e,t){super(e,t),this.handleRemoveMount=e=>{(0,this.props.unmount)(e.MountPoint)},this.handleCreateNewMount=(e,t,a,n)=>{(0,this.props.addMount)(e,t,"",a,n)},this.handleUnmountAll=()=>{(0,this.props.unmountAll)()},this.state={showNewMountCard:!1}}componentDidMount(){(0,this.props.getMountList)()}render(){const e=this.props.currentMounts;return r.a.createElement("div",{"data-test":"mountDashboardComponent"},r.a.createElement(s.a,null,r.a.createElement(l.a,{lg:12,className:"mb-4 d-flex justify-content-between"},r.a.createElement(w,{buttonLabel:"Create new mount",okHandle:this.handleCreateNewMount}),r.a.createElement(i.a,{className:"float-right",color:"danger",onClick:this.handleUnmountAll},"Unmount all"))),r.a.createElement(u.a,{responsive:!0,className:"table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No."),r.a.createElement("th",null,"Mount Point"),r.a.createElement("th",null,"Mounted since"),r.a.createElement("th",null,"Fs"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,e&&e.map((e,t)=>r.a.createElement("tr",{key:e.MountPoint},r.a.createElement("td",null,t),r.a.createElement("td",null,e.MountPoint),r.a.createElement("td",null,new Date(e.MountedOn).toLocaleTimeString()),r.a.createElement("td",null,e.Fs),r.a.createElement("td",null,r.a.createElement(i.a,{color:"danger",onClick:()=>this.handleRemoveMount(e)},"Unmount")))))))}}t.default=Object(o.b)(e=>({currentMounts:e.mount.currentMounts}),{getMountList:d,addMount:(e,t,a,n,r)=>{e.endsWith(":")||(e+=":");const o=m.p;return s=>{c.a.post(p.a.createMount,{fs:e,mountPoint:t,mountType:a,vfsOpt:n,mountOpt:r}).then(e=>{s({type:o,status:m.L,payload:e.data})},e=>{s({type:o,status:m.J,payload:e})}),s(d())}},unmount:e=>{const t=m.H;return a=>{c.a.post(p.a.removeMount,{mountPoint:e}).then(e=>{a({type:t,status:m.L,payload:e.data})},e=>{a({type:t,status:m.J,payload:e})}),a(d())}},unmountAll:()=>{const e=m.H;return t=>{c.a.post(p.a.unmountAll).then(a=>{t({type:e,status:m.L,payload:a.data})},a=>{t({type:e,status:m.J,payload:a})}),t(d())}}})(S)}}]);
//# sourceMappingURL=12.04bdaa59.chunk.js.map