(this["webpackJsonp@rclone/rclone-webui-react"]=this["webpackJsonp@rclone/rclone-webui-react"]||[]).push([[11],{278:function(e,t,a){"use strict";var r=a(4);r.oneOfType([r.shape({Features:r.object.isRequired,Hashes:r.array.isRequired,Name:r.string.isRequired,Precision:r.number.isRequired,String:r.string.isRequired}),r.object]),r.shape({remoteName:r.string.isRequired,remotePath:r.string.isRequired}),r.string,r.bool,r.bool,r.shape({Path:r.string.isRequired,Name:r.string.isRequired,Size:r.number,MimeType:r.string,ModTime:r.string.isRequired,IsDir:r.bool.isRequired}),r.shape({rate:r.string.isRequired})},280:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"h",(function(){return s})),a.d(t,"d",(function(){return i})),a.d(t,"g",(function(){return c})),a.d(t,"l",(function(){return m})),a.d(t,"k",(function(){return d})),a.d(t,"j",(function(){return h})),a.d(t,"i",(function(){return u})),a.d(t,"f",(function(){return p})),a.d(t,"a",(function(){return g})),a.d(t,"n",(function(){return E})),a.d(t,"m",(function(){return f})),a.d(t,"e",(function(){return b}));var r=a(2),n=a(283);const o=(e,t,a)=>n=>{n({type:r.j,id:e,remoteName:t,remotePath:a}),n(s(e))},l=(e,t)=>a=>{a({type:r.k,remoteName:t,id:e,remotePath:""}),a(s(e))},s=e=>(t,a)=>{const r=a().explorer.currentPaths[e],o=r.remoteName,l=r.remotePath;o&&""!==o&&t(Object(n.e)(o,l))},i=(e,t)=>a=>{a({type:r.l,id:e,remotePath:t}),a(s(e))},c=e=>t=>{t({type:r.q,id:e})},m=e=>t=>{t({type:r.I,id:e})},d=e=>t=>{t({type:r.F,id:e}),t(s(e))},h=e=>t=>{t({type:r.E,id:e}),t(s(e))},u=e=>t=>{t({type:r.D,id:e}),t(s(e))},p=(e,t)=>a=>{a({type:r.o,id:e,filter:t})},g=(e,t)=>a=>{a({type:r.f,id:e,mode:t})},E=(e,t)=>a=>{a({type:r.m,id:e,searchQuery:t})},f=(e,t)=>a=>{a({type:r.i,id:e,payload:t})},b=(e,t,a)=>n=>{n({type:r.n,id:e,payload:{sortFilter:t,sortFilterAscending:a}})}},283:function(e,t,a){"use strict";a.d(t,"f",(function(){return s})),a.d(t,"g",(function(){return i})),a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return m})),a.d(t,"a",(function(){return d})),a.d(t,"h",(function(){return h})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return p}));var r=a(2),n=a(61),o=a(280),l=a(284);const s=e=>t=>{Object(l.getRemoteInfo)(e).then(a=>{t({type:r.v,status:r.L,payload:{[e.split(":")[0]]:a}})},e=>t({type:r.v,status:r.J,payload:e}))},i=()=>(e,t)=>{Object(l.getAllRemoteNames)().then(t=>e({type:r.A,status:r.L,payload:t.remotes}),t=>e({type:r.A,status:r.J,payload:t}))},c=(e,t)=>a=>{if(""!==e){const n="".concat(e,"-").concat(t);Object(l.getFilesList)(e,t).then(e=>a({type:r.w,status:r.L,payload:{path:n,filesList:e.list}}),e=>a({type:r.w,status:r.J,payload:{path:n,error:e}}))}},m=(e,t)=>a=>{if(!e||e<0)throw new Error("Invalid number of cols:".concat(e));a({type:r.h,payload:{numCols:e,mode:t}})},d=e=>t=>{const a=Object(n.l)(3);t(Object(o.g)(a)),t(u(a,e)),t({type:r.a,payload:{containerID:a,paneID:e}})},h=(e,t)=>a=>{a(Object(o.l)(e)),a({type:r.G,payload:{containerID:e,paneID:t}})},u=(e,t)=>a=>{a({type:r.b,payload:{containerID:e,paneID:t}})},p=e=>t=>{t({type:r.e,payload:e})}},334:function(e,t,a){"use strict";var r=a(0),n=a.n(r),o=a(325),l=a.n(o);const s=(e,t)=>{const a=t.trim().toLowerCase(),r=a.length;return 0===r?e:0===r?[]:e.filter(e=>e.toLowerCase().slice(0,r)===a)},i=e=>e,c=e=>n.a.createElement("div",null,n.a.createElement("i",{className:"fa fa-lg fa-hdd-o"})," ",e);class m extends n.a.Component{constructor(e){super(e),this.onSuggestionsFetchRequested=({value:e})=>{this.setState({suggestions:s(this.props.suggestions,e)})},this.onSuggestionsClearRequested=()=>{this.setState({suggestions:[]})},this.state={suggestions:[]}}render(){const e=this.props,t={placeholder:"Type the name of remote you want to open",value:e.value,onChange:e.onChange};return n.a.createElement(l.a,{suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:i,renderSuggestion:c,alwaysRenderSuggestions:!0,highlightFirstSuggestion:!0,inputProps:t,style:{width:"100%"}})}}var d=m,h=a(84),u=a(283),p=a(280),g=a(291),E=a(41),f=a(293);a(278);class b extends n.a.Component{constructor(e){super(e),this.shouldUpdateRemoteName=(e,{newValue:t})=>{0===t.indexOf("/")?this.setState({remoteName:t,openButtonText:"Open local path"}):this.setState({remoteName:t,openButtonText:"Open"})},this.openRemote=e=>{e.preventDefault();(0,this.props.handleChangeRemoteName)(this.state.remoteName)},this.state={isEmpty:!1,remoteName:e.remoteName,openEnabled:!1,openButtonText:"Open"}}componentDidMount(){this.props.getRemoteNames()}render(){const e=this.state,t=e.isEmpty,a=e.remoteName,r=this.props.remotes;return this.props.hasError?n.a.createElement("div",null,"Error loading remotes. Please try again."):t?n.a.createElement("div",null,"Add some remotes to see them here ",n.a.createElement("span",{role:"img","aria-label":"sheep"},"\ud83d\udc11"),"."):n.a.createElement(g.a,{onSubmit:this.openRemote,className:"row"},n.a.createElement(E.a,{xs:12,sm:10,lg:10},n.a.createElement(d,{value:a,onChange:this.shouldUpdateRemoteName,suggestions:r})),n.a.createElement(E.a,{xs:12,sm:2,lg:2},n.a.createElement(f.a,{className:"btn-lg",color:"success"},this.state.openButtonText)))}}b.defaultProps={};t.a=Object(h.b)((e,t)=>({remotes:e.remote.remotes,hasError:!1,error:e.remote.error,currentPath:e.explorer.currentPaths[t.containerID]}),{getRemoteNames:u.g,getFsInfo:u.f,changeRemoteName:p.c})(b)},562:function(e,t){e.exports="data:image/png;base64,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"},563:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAABYCAYAAABRVa2MAAAABHNCSVQICAgIfAhkiAAAA1FJREFUeF7tlMFNJUEMBZcgNgjyz4XNAYIAiROHFaUy+nLTqrnasnrqld7Ty+v7+5++CPxyAk+J/MsT7PmfBBI5Ea4gkMhXxNhPJHIOXEEgka+IsZ9I5By4gkAiXxFjP5HIOXAFgUS+IsZ+IpFz4AoCiXxFjP1EIufAFQQS+YoY+4lEzoErCCTyFTH2Ez8W+flvEL8S+Pf2PY94/Z8PcSPLEpkIyTkFksiJLJXaWU/kGXfiRldrZCIk5xRIjVwjS6V21hN5xp240dUamQjJOQVSI9fIUqmd9USecSdudLVGJkJyToHUyDWyVGpnPZFn3IkbXa2RiZCcUyA1co0sldpZT+QZd+JGV2tkIiTnFEiNXCNLpXbWE3nGnbjR1RqZCMk5BVIj18hSqZ31RJ5xJ250tUYmQnJOgdTINbJUamc9kWfciRtdrZGJkJxTIDVyjSyV2llP5Bl34kZXa2QiJOcUSI1cI0uldtYTecaduNHVGpkIyTkFUiPXyFKpnfVEnnEnbnS1RiZCck6B1Mg1slRqZz2RZ9yJG12tkYmQnFMgNXKNLJXaWU/kGXfiRldrZCIk5xRIjVwjS6V21hN5xp240dUamQjJOQVSI9fIUqmd9USecSdudLVGJkJyToHUyDWyVGpnPZFn3IkbXa2RiZCcUyA1co0sldpZT+QZd+JGV2tkIiTnFEiNXCNLpXbWE3nGnbjR1RqZCMk5BVIj18hSqZ31RJ5xJ250tUYmQnJOgdTINbJUamc9kWfciRtdrZGJkJxTIDVyjSyV2llP5Bl34kZXa2QiJOcUSI1cI0uldtYTecaduNHVGpkIyTkFUiPXyFKpnfVEnnEnbnS1RiZCck6B1Mg1slRqZz2RZ9yJG12tkYmQnFMgNXKNLJXaWU/kGXfiRldrZCIk5xRIjVwjS6V21hN5xp240dUamQjJOQVSI9fIUqmd9USecSdudLVGJkJyToHUyIc2ssy59Qg8hMCPG/khr+poBCSBRJbAWj+TQCKfmUuvkgQSWQJr/UwCiXxmLr1KEkhkCaz1Mwkk8pm59CpJIJElsNbPJJDIZ+bSqySBRJbAWj+TQCKfmUuvkgQSWQJr/UwCiXxmLr1KEkhkCaz1Mwkk8pm59CpJ4AOLvinHBVNx8QAAAABJRU5ErkJggg=="},564:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALYAAABYCAYAAABYvg32AAAABHNCSVQICAgIfAhkiAAAA11JREFUeF7tlMFJhWEMBLUIi7D/XrQHLUJB8OLBYQkxMcy7Jrz83+ywjy9vHx8P/iRwjMCjYh9L1Od8EVBsRThJQLFPxuqjFFsHThJQ7JOx+ijF1oGTBBT7ZKw+SrF14CQBxT4Zq49SbB04SUCxT8bqoxRbB04SUOyTsfooxdaBkwQU+2SsPqos9vPT/4L4+v779/6393y/5tq76D1knWL/IKTYpMzfzBU75EzAFDsE2rROOdFZG9vGJkdG5oodYidgNnYItGmdcqKzNraNTY6MzBU7xE7AbOwQaNM65URnbWwbmxwZmSt2iJ2A2dgh0KZ1yonO2tg2NjkyMlfsEDsBs7FDoE3rlBOdtbFtbHJkZK7YIXYCZmOHQJvWKSc6a2Pb2OTIyFyxQ+wEzMYOgTatU0501sa2scmRkblih9gJmI0dAm1ap5zorI1tY5MjI3PFDrETMBs7BNq0TjnRWRvbxiZHRuaKHWInYDZ2CLRpnXKisza2jU2OjMwVO8ROwGzsEGjTOuVEZ21sG5scGZkrdoidgNnYIdCmdcqJztrYNjY5MjJX7BA7AbOxQ6BN65QTnbWxbWxyZGSu2CF2AmZjh0Cb1iknOmtj29jkyMhcsUPsBMzGDoE2rVNOdNbGtrHJkZG5YofYCZiNHQJtWqec6KyNbWOTIyNzxQ6xEzAbOwTatE450Vkb28YmR0bmih1iJ2A2dgi0aZ1yorM2to1NjozMFTvETsBs7BBo0zrlRGdtbBubHBmZK3aInYDZ2CHQpnXKic7a2DY2OTIyV+wQOwGzsUOgTeuUE521sW1scmRkrtghdgJmY4dAm9YpJzprY9vY5MjIXLFD7ATMxg6BNq1TTnTWxraxyZGRuWKH2AmYjR0CbVqnnOisjW1jkyMjc8UOsRMwGzsE2rROOdFZG9vGJkdG5oodYidgNnYItGmdcqKzNraNTY6MzBU7xE7AbOwQaNM65URnbWwbmxwZmY+LPfJqj0oACJQbW8IS2EhAsTem4jeVCSh2GaF/sJGAYm9MxW8qE1DsMkL/YCMBxd6Yit9UJqDYZYT+wUYCir0xFb+pTECxywj9g40EFHtjKn5TmYBilxH6BxsJKPbGVPymMgHFLiP0DzYSUOyNqfhNZQKKXUboH2wk8AmzzJnHLKUNUAAAAABJRU5ErkJggg=="},567:function(e,t){},616:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAABHNCSVQICAgIfAhkiAAAAQhJREFUWEftlm0NwjAQhp8pAAdYQAI4wAHgAJQADpCAA0ABSEACEsiRlYym3W7LNTSk92tZbtdn7330KjKwKgMGCoTLQrZKrIBJR608gYNVPflKHIGlMrj4rpW+rW5NiClw6xnUBKQJMQPOPSHE/Q5IerR28lNpAaE9vOm3Bfah7hiqxBCIKyDnve1XSiSFmNc/J0W+a5EoKYRTtiu1BcJlyFQJVwMu+KV+GANSF878GjGF0F6Afo38H4TfhaU7/Alc5oT2MjPtDu2hvl8UQgbMAxgNjdzjO9lPN6GrXN4tAFnZUoKICnLOZxuLTTwZs6KMtQVXQe3YtYb5ilcgYoWZVPZY8CzS8QIbSj0iD+quAwAAAABJRU5ErkJggg=="},637:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(60),l=a(293),s=a(41),i=a(84),c=a(280),m=a(283),d=a(85),h=a(562),u=a.n(h),p=a(563),g=a.n(p),E=a(564),f=a.n(E),b=a(621),I=a(619),C=a(620);var N=Object(i.b)((e,t)=>({containers:e.remote.containers,numContainers:e.remote.numContainers,currentPaths:e.explorer.currentPaths,activeRemoteContainerID:e.remote.activeRemoteContainerID}),{addRemoteContainer:m.a,removeRemoteContainer:m.h,changeActiveRemoteContainer:m.b})((function(e){const t=e.addRemoteContainer,a=e.removeRemoteContainer,r=e.changeActiveRemoteContainer,o=e.activeRemoteContainerID,s=e.containers,i=e.currentPaths,c=e.paneID,m=o?o[c]:"";return n.a.createElement(b.a,{tabs:!0,className:"d-flex"},s.map(({ID:e,paneID:t})=>{if(c===t){const o=e===m;return n.a.createElement(I.a,{key:"TAB_"+e,className:"pl-0 pr-0 custom-tab "+(o?"tab-active":"")},n.a.createElement(C.a,{className:"float-center",onClick:()=>r(e,t)},n.a.createElement("i",{className:"fa fa-folder-o pr-1"}),n.a.createElement("span",{className:"overflow-hidden"},i[e]&&""!==i[e].remoteName?i[e].remoteName:"Open New"),n.a.createElement(l.a,{className:"btn-no-background btn btn-secondary p-0 pl-1 pr-2 ml-2",onClick:r=>{r.stopPropagation(),a(e,t)}},n.a.createElement("i",{className:"fa fa-lg fa-close"}))))}return null}),n.a.createElement(I.a,{key:"ADD_BUTTON",className:"pl-0 pr-0"},n.a.createElement(C.a,{className:"float-center",onClick:()=>t(c)},n.a.createElement("i",{className:"fa fa-lg fa-plus"}))))})),A=a(301),k=a(302),y=a(270),F=a(63),w=a.n(F),S=a(87),O=a(62),R=a(630),v=a(374),D=a(347),P=a(297),x=a(453);const U="FileComponent";var M=a(61),j=a(36),B=(a(278),a(276)),T=a(644),L=a(29),V=a(35),Q=a(565),J=a.n(Q);class H extends n.a.Component{error(){console.log("error")}render(){const e=this.props.options;return n.a.createElement(J.a,{options:e,error:this.error})}}var Z=function({playbackURL:e,MimeType:t}){const a=Object(r.useState)(!0),o=Object(B.a)(a,2),s=o[0],i=o[1];function c(e){e.stopPropagation(),i(!s)}let m;if(s)m=n.a.createElement("div",{className:"img-thumbnail w-100 text-center","data-test":"videoPlayerWidget"},n.a.createElement(l.a,{color:"link",onClick:c},n.a.createElement("i",{className:"fa fa-play-circle fa-4x"})));else{const a=e.substring(0,e.lastIndexOf("."))+".vtt";console.log(a);const r={options:{sources:[{type:t,src:e}],subtitles:[{language:"en",url:a,label:"EN"}]}};m=L.createPortal(n.a.createElement(T.a,{className:"task-modal d-none d-sm-block","data-test":"videoPlayerWidget",isOpen:!s,toggle:c},n.a.createElement(H,r)),document.getElementById(V.e))}return n.a.createElement(d.a,null,m)},q=a(550),Y=a(2);var G=Object(i.b)((e,t)=>{const a=t.downloadURL;return{imageData:e.imageLoader[a]}},{downloadImage:e=>t=>{if(!e)throw new Error("Cannot have null url");t({type:Y.C,status:Y.K,payload:{url:e}}),O.a.get(e,{responseType:"arraybuffer"}).then(a=>{console.log(a);const r=new Blob([a.data]),n=URL.createObjectURL(r);t({type:Y.C,status:Y.L,payload:{url:e,data:n}})},a=>{t({type:Y.C,status:Y.J,payload:{url:e,error:a}})})}})((function({downloadURL:e,inViewport:t,imageData:a,downloadImage:i,currentPath:c}){const m=Object(r.useState)(!0),d=Object(B.a)(m,2),h=d[0],u=d[1],p=Object(r.useState)(0),g=Object(B.a)(p,2),E=g[0],f=g[1];function b(e){e.stopPropagation(),u(!h)}if(Object(r.useEffect)(()=>{t&&e&&!a&&i(e)}),h)return n.a.createElement("div",{onClick:b,"data-test":"toggleModal"},!a||a.isLoading?n.a.createElement(R.a,null,"Loading..."):n.a.createElement("img",{className:"img-thumbnail pd-0 m-0 -rotate-90",src:a.data,alt:""}));{const e=n.a.createElement("button",{className:"close",style:{position:"absolute",top:"15px",right:"15px"},onClick:b},n.a.createElement("i",{className:"fa fa-close fa-inverse"}));return L.createPortal(n.a.createElement(T.a,{className:"image-modal",isOpen:!h,toggle:b,external:e},n.a.createElement(y.a,{fluid:!0},n.a.createElement(o.a,null,n.a.createElement(s.a,{lg:8},n.a.createElement("img",{className:"rotatableImage img-thumbnail pd-0 m-0 "+(0!==E?"rotate"+E:""),src:a.data,alt:""})),n.a.createElement(s.a,{lg:4},n.a.createElement(A.a,null,n.a.createElement(q.a,null,"Operations"),n.a.createElement(k.a,null,n.a.createElement(o.a,null,n.a.createElement(l.a,{color:"link",onClick:function(){f(E>0?(E-90)%360:(360-E-90)%360)}},n.a.createElement("i",{className:"fa fa-rotate-left"})),n.a.createElement(l.a,{color:"link",onClick:function(){f((E+90)%360)}},n.a.createElement("i",{className:"fa fa-rotate-right"}))))))))),document.getElementById(V.e))}}));var X=function({playbackURL:e,MimeType:t}){const a=Object(r.useState)(!0),o=Object(B.a)(a,2),s=o[0],i=o[1];function c(e){e.stopPropagation(),i(!s)}let m;return m=s?n.a.createElement("div",{className:"img-thumbnail w-100 text-center","data-test":"audioPlayerWidget"},n.a.createElement(l.a,{color:"link",onClick:c},n.a.createElement("audio",{controls:!0},n.a.createElement("source",{src:e,type:t}),"Your browser does not support the audio tag."))):L.createPortal(n.a.createElement(T.a,{className:"task-modal d-none d-sm-block","data-test":"videoPlayerWidget",isOpen:!s,toggle:c},n.a.createElement("audio",{controls:!0},n.a.createElement("source",{src:e,type:t}),"Your browser does not support the audio tag.")),document.getElementById(V.e)),n.a.createElement(d.a,null,m)};function z(e){return{"image/jpeg":"Image","video/mp4":"Video","video/webm":"Video","audio/webm":"Audio","video/ogg":"Video","application/ogg":"Unspecified","audio/mpeg":"Audio","audio/wav":"Audio","audio/mp4":"Audio"}[e]}class K extends n.a.Component{constructor(...e){super(...e),this.getRenderForItem=()=>{const e=this.props,t=e.fsInfo,a=e.item,r=e.inViewport,o=e.currentPath,l=o.remoteName,s=o.remotePath,i=a.MimeType;let c="";const m=localStorage.getItem(V.c);switch(c=t.Features.BucketBased?m+"[".concat(l,"]/").concat(s,"/").concat(a.Name):m+"[".concat(l,":").concat(s,"]/").concat(a.Name),i){case"image/jpeg":return n.a.createElement(G,{item:a,downloadURL:c,inViewport:r});case"video/mp4":case"video/webm":case"audio/webm":case"video/ogg":case"application/ogg":return n.a.createElement(Z,{playbackURL:c,MimeType:i,currentPath:o});case"audio/mpeg":case"audio/wav":case"audio/mp4":return n.a.createElement(X,{playbackURL:c,MimeType:i});default:return null}}}render(){const e=this.props,t=e.loadMedia;let a=z(e.item.MimeType)&&t?this.getRenderForItem():null;return n.a.createElement(d.a,null,a)}}var W=Object(i.b)((e,t)=>{const a=e.explorer.currentPaths[t.containerID],r=e.explorer.loadImages[t.containerID];let n={};const o=a.remoteName;if(a&&e.remote.configs){const t=o.split(":")[0];e.remote.configs[t]&&(n=e.remote.configs[t])}return{currentPath:a,fsInfo:n,loadMedia:r}},{})(K),_=a(631),$=a(647),ee=a(632),te=a(634);var ae=function({downloadHandle:e,deleteHandle:t,item:a,linkShareHandle:r}){const o=a.IsDir;return n.a.createElement("div",{"data-test":"fileActionsComponent"},!o&&n.a.createElement(l.a,{color:"link",onClick:()=>e(a),"data-test":"btn-download"},n.a.createElement("i",{className:"fa fa-cloud-download fa-lg d-inline"})),n.a.createElement(l.a,{color:"link"},n.a.createElement("i",{className:"fa fa-info-circle"})),n.a.createElement(_.a,null,n.a.createElement($.a,{color:"link"},n.a.createElement("i",{className:"fa fa-ellipsis-v"})),n.a.createElement(ee.a,null,n.a.createElement(te.a,{header:!0},"Actions"),n.a.createElement(te.a,{"data-test":"btn-share-with-link",onClick:()=>r(a)},n.a.createElement("i",{className:"fa fa-share fa-lg d-inline"})," Share with link"),n.a.createElement(te.a,{divider:!0}),n.a.createElement(te.a,{"data-test":"btn-delete-item",onClick:()=>((e,t)=>{window.confirm("Are you sure you want to delete ".concat(t.Name))&&e(t)})(t,a)},n.a.createElement("i",{className:"fa fa-remove fa-lg d-inline text-danger"})," Delete "))))};const re={"application/pdf":"fa-file-pdf-o","image/jpeg":"fa-file-image-o","application/rar":"fa-file-archive-o","application/x-rar-compressed":"fa-file-archive-o","application/zip":"fa-file-archive-o","text/plain":"fa-file-text-o","text/x-vcard":"fa-address-card-o"};var ne=function({IsDir:e,MimeType:t}){let a=re[t];return e&&(a="fa-folder"),a||(a="fa-file"),n.a.createElement("i",{className:a+" fa fa-lg","data-test":"fileIconComponent"})};function oe(){return(oe=Object(S.a)(w.a.mark((function e(t){var a,r,n,o,l,s,i,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.srcRemoteName,r=t.srcRemotePath,n=t.destRemoteName,o=t.destRemotePath,l=t.Name,s=t.IsDir,i=t.dropEffect,c=t.updateHandler,"move"!==i){e.next=8;break}return e.next=4,Object(O.b)(a,r,n,o,l,s);case 4:c(),s?j.b.info("Directory copying started in background: ".concat(l)):j.b.info("File copying started in background: ".concat(l)),e.next=12;break;case 8:return e.next=10,Object(O.c)(a,r,n,o,l,s);case 10:c(),j.b.info("Directory moving started in background: ".concat(l));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const le={canDrag:e=>!0,beginDrag(e){const t=e.item;return{Name:t.Name,Path:t.Path,IsDir:t.IsDir,remoteName:e.remoteName,remotePath:e.remotePath}},endDrag(e,t,a){console.log(e,"Component:",a);try{t.getDropResult()&&a&&function(e){oe.apply(this,arguments)}(t.getDropResult())}catch(r){const e=r.response?r.response:r;console.log(JSON.stringify(e)),j.b.error("Error copying file(s). ".concat(e),{autoClose:!1})}}};class se extends n.a.Component{handleClick(e,t,a,r){e&&t(a,r)}render(){const e=this.props,t=e.containerID,a=e.inViewport,r=e.item,o=e.loadImages,l=e.clickHandler,s=e.downloadHandle,i=e.linkShareHandle,c=e.deleteHandle,m=e.connectDragSource,h=e.gridMode,u=r.IsDir,p=r.MimeType,g=r.ModTime,E=r.Name,f=r.Size;let b,I=new Date(g);return b=m("card"===h?n.a.createElement("div",{className:u?"":"col-md-4"},n.a.createElement(A.a,null,n.a.createElement(k.a,{onClick:e=>this.handleClick(u,l,e,r)},o&&z(p)?n.a.createElement(W,{containerID:t,item:r,inViewport:a}):n.a.createElement(ne,{IsDir:u,MimeType:p}),E),n.a.createElement(x.a,null,n.a.createElement(ae,{downloadHandle:s,linkShareHandle:i,deleteHandle:c,item:r})))):n.a.createElement("tr",{className:"pointer-cursor fadeIn"},n.a.createElement("td",{onClick:e=>l(e,r)},n.a.createElement(ne,{IsDir:u,MimeType:p})," ",E),n.a.createElement("td",null,-1===f?"-":Object(M.g)(f,2)),n.a.createElement("td",{className:"d-none d-md-table-cell"},I.toLocaleDateString()),n.a.createElement("td",null,n.a.createElement(ae,{downloadHandle:s,linkShareHandle:i,deleteHandle:c,item:r})))),n.a.createElement(d.a,null,b)}}var ie=Object(P.DragSource)(U,le,(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))(se),ce=a(34),me=a(627),de=a(628),he=a(287),ue=a(629);class pe extends n.a.Component{constructor(e){super(e),this.copyToClipboard=()=>{let e=document.createElement("textarea");e.innerText=this.props.linkUrl,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove()},this.handleFocus=e=>e.target.select(),this.state={copySuccess:""},this.toggle=this.toggle.bind(this)}toggle(){this.props.closeModal()}render(){const e=this.props,t=e.isVisible,a=e.linkUrl,r=this.state.copySuccess;let o=!document||!document.queryCommandSupported||document.queryCommandSupported("copy");return n.a.createElement("div",null,n.a.createElement(T.a,{isOpen:t,toggle:this.toggle},n.a.createElement(me.a,{toggle:this.toggle,"data-test":"modalHeader"},"Public link generated."),n.a.createElement(de.a,{"data-test":"modalBody"},n.a.createElement(he.a,{readOnly:!0,value:a,onFocus:this.handleFocus}),o&&n.a.createElement("div",null,n.a.createElement(l.a,{color:"link",onClick:this.copyToClipboard},n.a.createElement("i",{className:"fa fa-clipboard fa-2x"}))),r),n.a.createElement(ue.a,{"data-test":"modalFooter"},n.a.createElement(l.a,{color:"primary",onClick:this.toggle},"Done")," ")))}}pe.defaultProps={isVisible:!0};var ge=pe;var Ee=function({height:e,children:t}){return n.a.createElement("div",{style:{overflow:"auto",height:e}},t)},fe=a(284),be=a(403);var Ie=e=>n.a.createElement("div",{"data-test":"dropOverlay",style:{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:1,opacity:.5,backgroundColor:"gray"}});const Ce={drop(e,t,a){if(t.didDrop())return;let r=t.getItem(),n=r.Name,o=r.Path,l=r.IsDir,s=r.remoteName;return{srcRemoteName:Object(M.a)(s),srcRemotePath:o,destRemoteName:Object(M.a)(e.currentPath.remoteName),destRemotePath:e.currentPath.remotePath,Name:n,IsDir:l,updateHandler:a.updateHandler}},canDrop(e,t){const a=t.getItem(),r=a.remoteName,n=a.remotePath,o=e.currentPath.remoteName,l=e.currentPath.remotePath;return o!==r||l!==n}};class Ne extends n.a.PureComponent{constructor(e){super(e),this.closeLinkShareModal=()=>{this.setState({showLinkShareModal:!1})},this.showLinkShareModal=()=>{this.setState({showLinkShareModal:!0})},this.updateHandler=()=>{this.getFilesList()},this.dismissAlert=e=>{this.setState({isDownloadProgress:!1})},this.linkShareHandle=e=>{if(this.props.fsInfo.Features.PublicLink){const t=this.props.currentPath.remoteName;Object(fe.createNewPublicLink)(t,e.Path).then(e=>{this.setState({generatedLink:e.url,showLinkShareModal:!0})},e=>{j.b.error("Error Generating link: "+e)})}else j.b.error("This remote does not support public link")},this.getFileComponents=e=>{const t=this.props,a=t.files,r=t.containerID,o=t.gridMode,l=t.fsInfo,s=t.loadImages,i=this.props.currentPath,c=i.remoteName,m=i.remotePath;if(l&&!Object(M.j)(l))return a.reduce((t,a)=>{let i=a.ID,d=a.Name;return void 0===i&&(i=d),a.IsDir===e&&t.push(n.a.createElement(ie,{key:i,item:a,clickHandler:this.handleFileClick,downloadHandle:this.downloadHandle,deleteHandle:this.deleteHandle,remoteName:c,remotePath:m,gridMode:o,containerID:r,linkShareHandle:this.linkShareHandle,loadImages:s,isBucketBased:l.Features.BucketBased,canCopy:l.Features.Copy,canMove:l.Features.Move,itemIdx:1})),t},[])},this.applySortFilter=e=>{const t=this.props,a=t.changeSortFilter,r=t.containerID;return this.props.sortFilter===e?a(r,e,!0!==this.props.sortFilterAscending):a(r,e,!0)},this.state={isLoading:!1,isDownloadProgress:!1,downloadingItems:0,shouldUpdate:!0,showLinkShareModal:!1,generatedLink:""},this.handleFileClick=this.handleFileClick.bind(this),this.downloadHandle=this.downloadHandle.bind(this),this.deleteHandle=this.deleteHandle.bind(this)}handleFileClick(e,t){const a=t.Path,r=t.IsDir,n=t.IsBucket;r||n?this.updateRemotePath(a,r,n):this.downloadHandle(t)}updateRemotePath(e,t,a){const r=this.props.currentPath.remoteName;let n="",o="";a?(n=Object(M.a)(r)+e,o=""):t&&(n=r,o=e),this.props.changePath(this.props.containerID,n,o)}getFilesList(){const e=this.props.currentPath,t=e.remoteName,a=e.remotePath;this.props.getFiles(t,a)}downloadHandle(e){var t=this;return Object(S.a)(w.a.mark((function a(){var r,n,o,l,s,i,c,m;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.props.currentPath,n=r.remoteName,o=r.remotePath,l=t.props.fsInfo,s="",s=l.Features.BucketBased?"/[".concat(n,"]/").concat(o,"/").concat(e.Name):"/[".concat(n,":").concat(o,"]/").concat(e.Name),t.setState(e=>({downloadingItems:e.downloadingItems+1,isDownloadProgress:!0})),a.next=7,Object(O.a)({url:s,method:"GET",responseType:"blob"});case 7:i=a.sent,c=window.URL.createObjectURL(new Blob([i.data])),(m=document.createElement("a")).href=c,m.setAttribute("download",e.Name),document.body.appendChild(m),m.click(),t.setState(e=>({downloadingItems:e.downloadingItems-1}),()=>{0===t.state.downloadingItems&&t.setState({isDownloadProgress:!1})});case 15:case"end":return a.stop()}}),a)})))()}deleteHandle(e){var t=this;return Object(S.a)(w.a.mark((function a(){var r;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=t.props.currentPath.remoteName,a.prev=1,!e.IsDir){a.next=9;break}return a.next=5,Object(fe.purgeDir)(r,e.Path);case 5:t.updateHandler(),j.b.info("".concat(e.Name," deleted.")),a.next=13;break;case 9:return a.next=11,Object(fe.deleteFile)(r,e.Path);case 11:t.updateHandler(),j.b.info("".concat(e.Name," deleted."),{autoClose:!0});case 13:a.next=18;break;case 15:a.prev=15,a.t0=a.catch(1),j.b.error("Error deleting file. ".concat(a.t0),{autoClose:!1});case 18:case"end":return a.stop()}}),a,null,[[1,15]])})))()}render(){const e=this.state,t=e.isLoading,a=e.isDownloadProgress,r=e.downloadingItems,l=e.generatedLink,i=e.showLinkShareModal,c=this.props,m=c.connectDropTarget,h=c.isOver,u=c.files,p=c.gridMode,g=c.canDrop,E=c.sortFilter,f=c.sortFilterAscending,b=this.props.currentPath.remoteName;if(t||!u)return n.a.createElement("div",null,n.a.createElement(R.a,{color:"primary"})," Loading");{if(""===b)return n.a.createElement("div",null,"No remote is selected. Select a remote from above to show files.");let e=this.getFileComponents(!0),t=this.getFileComponents(!1),c="";if("card"===p)c=n.a.createElement(y.a,{fluid:!0},n.a.createElement(o.a,null,n.a.createElement(s.a,{lg:3},n.a.createElement("h3",null,"Directories"),n.a.createElement(Ee,{height:V.b},e)),n.a.createElement(s.a,{lg:9},n.a.createElement("h3",null,"Files"),n.a.createElement(Ee,{height:V.b},n.a.createElement(o.a,null,t)))));else{let a="fa fa-lg fa-arrow-down";f&&(a="fa fa-lg fa-arrow-up"),c=n.a.createElement(y.a,{fluid:!0,className:"p-0"},n.a.createElement(Ee,{height:V.b},n.a.createElement(v.a,{className:"table table-responsive-sm table-striped table-fix-head"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"pointer-cursor",onClick:()=>this.applySortFilter("name")},"Name ","name"===E&&n.a.createElement("i",{className:a})),n.a.createElement("th",{className:"pointer-cursor",onClick:()=>this.applySortFilter("size")},"Size ","size"===E&&n.a.createElement("i",{className:a})),n.a.createElement("th",{className:"d-none d-md-table-cell pointer-cursor",onClick:()=>this.applySortFilter("modified")},"Modified ","modified"===E&&n.a.createElement("i",{className:a})),n.a.createElement("th",null,"Actions"))),n.a.createElement("tbody",null,u.length>0?n.a.createElement(n.a.Fragment,null,n.a.createElement("tr",null,n.a.createElement("th",{colSpan:4},"Directories")),e,n.a.createElement("tr",null,n.a.createElement("th",{colSpan:4},"Files")),t):n.a.createElement("tr",null,n.a.createElement("th",{colSpan:4},"Files"))))))}return m(n.a.createElement("div",{className:"row"},h&&g&&n.a.createElement(Ie,null),n.a.createElement(d.a,null,n.a.createElement(D.a,{color:"info",isOpen:a,toggle:this.dismissAlert,sm:12,lg:12},"Downloading ",r," file(s). Please wait."),c,n.a.createElement(ge,{closeModal:this.closeLinkShareModal,isVisible:i,linkUrl:l}))))}}}Ne.defaultProps={};const Ae=Object(be.a)((e,t)=>t.containerID,(e,t)=>e.explorer.currentPaths[t.containerID],(e,t)=>e.explorer.visibilityFilters[t.containerID],(e,t)=>e.explorer.sortFilters[t.containerID],(e,t)=>e.explorer.searchQueries[t.containerID],(e,t)=>e.explorer.sortFiltersAscending[t.containerID],(e,t)=>e.remote.files["".concat(e.explorer.currentPaths[t.containerID].remoteName,"-").concat(e.explorer.currentPaths[t.containerID].remotePath)],(e,t,a,r,n,o,l)=>(l=l.files,a&&""!==a&&(l=Object(M.d)(l,a)),n&&(l=Object(M.e)(l,n)),l.sort(Object(M.h)(r,o)),l));var ke=Object(ce.d)(Object(i.b)((e,t)=>{const a=e.explorer,r=a.currentPaths,n=a.gridMode,o=a.searchQueries,l=a.loadImages,s=a.sortFilters,i=a.sortFiltersAscending,c=t.containerID,m=r[c],d=n[c],h=o[c],u=l[c],p=s[c],g=i[c];let E={};const f=m.remoteName,b=m.remotePath;if(m&&e.remote.configs){const t=f.split(":")[0];e.remote.configs[t]&&(E=e.remote.configs[t])}const I="".concat(f,"-").concat(b);let C=e.remote.files[I];return C&&(C=Ae(e,t)),{files:C,currentPath:m,fsInfo:E,gridMode:d,searchQuery:h,loadImages:u,sortFilter:p,sortFilterAscending:g}},{getFiles:m.e,navigateUp:c.k,changePath:c.b,changeSortFilter:c.e}),Object(P.DropTarget)(U,Ce,(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}})))(Ne),ye=a(641),Fe=a(291),we=a(600),Se=a(371),Oe=a(372),Re=a(43);class ve extends n.a.Component{constructor(e){super(e),this.disableForm=e=>{this.setState({disableForm:e})},this.changeName=e=>{const t=e.target.value;this.setState({name:t})},this.state={name:"",disableForm:!1},this.createNewFolder=this.createNewFolder.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.toggle=this.toggle.bind(this)}createNewFolder(){var e=this;return Object(S.a)(w.a.mark((function t(){var a,r,n,o,l,s;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.name,r=e.props.currentPath,n=r.remoteName,o=r.remotePath,l=e.props.fsInfo,n=Object(M.a)(n),t.prev=4,l.Features.BucketBased&&""===o?n+=a:""===o?o=a:o+="/"+a,s={fs:n,remote:o},e.disableForm(!0),t.next=10,O.a.post(Re.a.mkdir,s);case 10:e.disableForm(!1),e.toggle(),j.b.info("Folder created: ".concat(o)),e.props.getFilesForContainerID(e.props.containerID),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(4),e.disableForm(!1),t.t0.response?j.b.error("Error creating folder: ".concat(t.t0.response.data.error)):j.b.error("Error creating folder: ".concat(t.t0));case 20:case"end":return t.stop()}}),t,null,[[4,16]])})))()}handleSubmit(e){e.preventDefault(),this.createNewFolder()}toggle(){this.props.closeModal()}render(){const e=this.state,t=e.name,a=e.disableForm,r=this.props,o=r.isVisible,i=r.currentPath;return n.a.createElement(T.a,{isOpen:o,toggle:this.toggle,"data-test":"newFolderComponent"},n.a.createElement(Fe.a,{onSubmit:this.handleSubmit},n.a.createElement(me.a,{toggle:this.toggle},"Create New folder at ",i.remoteName,": ",i.remotePath),n.a.createElement(de.a,null,n.a.createElement(Se.a,{row:!0},n.a.createElement(Oe.a,{for:"folderName",sm:5},"Enter the name"),n.a.createElement(s.a,{sm:7},n.a.createElement(he.a,{type:"text",name:"folderName",id:"folderName",value:t,onChange:this.changeName,required:!0,autoFocus:!0}))),n.a.createElement("div",{className:"clearfix"},n.a.createElement(l.a,{type:"submit",color:"success",className:"float-right",disabled:a},n.a.createElement("i",{className:"fa fa-check fa-lg"}),"Create folder")))))}}var De=Object(i.b)((e,t)=>{const a=e.explorer.currentPaths[t.containerID];let r={};return a&&e.remote.configs&&e.remote.configs[a.remoteName]&&(r=e.remote.configs[a.remoteName]),{currentPath:a,fsInfo:r}},{getFilesForContainerID:c.h})(ve);var Pe=a(353),xe=a(616),Ue=a.n(xe),Me=a(332),je=a(638);var Be=e=>{const t=e.onDrop,a=Object(je.a)({accept:[Me.b.FILE],drop(a,r){t&&t(e,r)},collect:e=>({isOver:e.isOver(),canDrop:e.canDrop()})}),r=Object(B.a)(a,2),o=r[0],l=o.canDrop,s=o.isOver,i=r[1],c=l&&s;return n.a.createElement("div",{ref:i},c&&n.a.createElement(Ie,null),e.children)},Te=a(635);var Le=e=>{const t=e.currentPath,a=Object(r.useState)(!1),i=Object(B.a)(a,2),c=i[0],m=i[1],d=Object(r.useState)(null),h=Object(B.a)(d,2),u=h[0],p=h[1],g=Object(r.useState)(!1),E=Object(B.a)(g,2),f=E[0],b=E[1],I=()=>m(!c),C=Object(r.useCallback)((e,t)=>{t&&p(t.getItem().files)},[]);return n.a.createElement("div",{"data-test":"fileUploadModalComponent"},n.a.createElement(l.a,{className:"btn-explorer-action h-100",id:"UploadButton",onClick:I},n.a.createElement("i",{className:"fa fa-lg fa-upload"})),n.a.createElement(ye.a,{placement:"right",target:"UploadButton"},"Upload file(s)"),n.a.createElement(T.a,{isOpen:c,toggle:I},n.a.createElement(Te.a,{backend:Me.a},n.a.createElement(me.a,{toggle:I},"New Mount"),n.a.createElement(de.a,null,n.a.createElement(y.a,{fluid:!0},n.a.createElement(Be,{onDrop:C},u?n.a.createElement(o.a,null,n.a.createElement(v.a,null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Name"),n.a.createElement("th",null,"Size"))),n.a.createElement("tbody",null,(()=>{let e=[];for(let t=0;t<u.length;t++)e.push(n.a.createElement("tr",null,n.a.createElement("td",null,u[t].name),n.a.createElement("td",null,-1===u[t].size?"-":Object(M.g)(u[t].size,2))));return e})()))):n.a.createElement(o.a,{className:"upload-box"},n.a.createElement(s.a,{sm:3}),n.a.createElement(s.a,{sm:6},n.a.createElement("label",{htmlFor:"upload-file"},n.a.createElement(o.a,null,n.a.createElement("i",{className:"fa fa-lg fa-plus mx-auto mt-5"}),n.a.createElement("p",{className:"text-center mt-2"},"Click here or drag and drop files to upload")))),n.a.createElement(s.a,{sm:3})),n.a.createElement(o.a,null,n.a.createElement(Se.a,{row:!0,className:"pl-2 pr-2 d-none"},n.a.createElement(he.a,{id:"upload-file",type:"file",name:"file",onChange:e=>{p(e.target.files)},multiple:!0})))))),n.a.createElement(ue.a,null,n.a.createElement(l.a,{"data-test":"ok-button",color:"primary",onClick:e=>{const a=new FormData;for(let t=0;t<u.length;t++){let e=u[t];a.append("file"+t,e)}b(!0),O.a.post("operations/uploadfile?fs="+"".concat(Object(M.a)(t.remoteName))+"&remote=".concat(t.remotePath),a).then(e=>{b(!1),p(null),I(),j.b.info("File uploaded successfully")},e=>{b(!1),j.b.error("File upload failed")})},disabled:!u||f},f?"Uploading":"Upload")," ",n.a.createElement(l.a,{"data-test":"cancel-button",color:"secondary",onClick:I},"Cancel")))))};function Ve(e){const t=e.remoteName,a=e.remotePath;return"".concat(t,":/").concat(a)}class Qe extends n.a.Component{constructor(e){super(e),this.openNewFolderModal=()=>{const e=this.props.fsInfo;e&&e.Features&&e.Features.CanHaveEmptyDirectories?this.setState({newFolderModalIsVisible:!0}):j.b.error("This remote cannot have empty directories")},this.closeNewFolderModal=()=>{this.setState({newFolderModalIsVisible:!1})},this.handleChangeFilter=e=>{const t=e.target.value;(0,this.props.changeVisibilityFilter)(this.props.containerID,t)},this.handleChangeGridMode=()=>{const e=this.props,t=e.gridMode;(0,e.changeGridMode)(e.containerID,"list"===t?"card":"list")},this.changeSearch=e=>{e.preventDefault();const t=this.props,a=t.containerID;(0,t.setSearchQuery)(a,e.target.value)},this.toggleDropDown=()=>{this.setState(e=>({dropdownOpen:!e.dropdownOpen}))},this.toggleAboutModal=()=>{const e=this.props.fsInfo;e&&e.Features&&e.Features.About?this.setState(e=>({isAboutModalOpen:!e.isAboutModalOpen}),()=>{if(this.state.isAboutModalOpen){const e=this.props.containerID;this.props.getAboutRemote(e)}}):j.b.error("This remote does not support About")},this.handleCleanTrash=()=>{const e=this.props.fsInfo;if(e&&e.Features&&e.Features.CleanUp){if(window.confirm("Are you sure you want to clear the trash. This operation cannot be undone")){const e=this.props,t=e.currentPath,a=e.containerID;let r=t.remoteName;Object(fe.cleanTrashForRemote)(r).then(e=>{200===e.status&&(Object(j.b)("Trash Cleaned"),this.props.getAbout(a))},e=>{j.b.error("Error clearing trash "+e)})}}else j.b.error("Clearing trash is not allowed on this remote")},this.changeLoadMedia=e=>{e.stopPropagation();const t=this.props;(0,t.setLoadImages)(t.containerID,!t.loadImages)},this.handleSearchOpen=()=>{const e=this.props.containerID;this.setState(t=>(t.searchOpen&&this.props.setSearchQuery(e,""),{searchOpen:!t.searchOpen}))},this.onChangeTrial=e=>this.setState({tempUrl:e.target.value}),this.onFocusHandle=e=>this.setState({isUrlBarFocused:!0,tempUrl:Ve(this.props.currentPath)}),this.onBlurHandle=e=>this.setState({isUrlBarFocused:!1,tempUrl:Ve(this.props.currentPath)}),this.onSubmitUrlChange=e=>{e.preventDefault();const t=this.props,a=t.changePath,r=t.containerID,n=t.currentPath;let o=this.state.tempUrl.split(":/");o&&o[0]&&(n.remoteName!==o[0]||n.remotePath!==o[1])&&a(r,o[0],o[1])},this.state={newFolderModalIsVisible:!1,isAboutModalOpen:!1,dropdownOpen:!1,searchOpen:!1,tempUrl:Ve(e.currentPath),isUrlBarFocused:!1},this.filterOptions=V.i}componentDidUpdate(e,t,a){e.currentPath!==this.props.currentPath&&this.setState({tempUrl:Ve(this.props.currentPath)})}render(){const e=this.props,t=e.containerID,a=e.getFilesForContainerID,r=e.gridMode,i=e.navigateFwd,c=e.navigateBack,m=e.searchQuery,d=e.currentPath,h=e.doughnutData,u=this.state,p=u.newFolderModalIsVisible,g=u.dropdownOpen,E=u.isAboutModalOpen,f=u.searchOpen,b=u.tempUrl,I=u.isUrlBarFocused,C=d.remoteName;return n.a.createElement("div",{className:"pl-0 mt-3 mb-1 d-flex justify-content-between align-items-center",style:{marginLeft:"-15px",marginRight:"-15px"}},n.a.createElement("div",{className:"d-flex flex-nowrap"},n.a.createElement(l.a,{color:"light",className:"mr-1 btn-explorer-action",onClick:()=>c(t)},n.a.createElement("i",{className:"fa fa-lg fa-arrow-left"})),n.a.createElement(l.a,{color:"light",className:"mr-1 btn-explorer-action",onClick:()=>i(t)},n.a.createElement("i",{className:"fa fa-lg fa-arrow-right"})),n.a.createElement(l.a,{className:"mr-1 btn-explorer-action",id:"RefreshButton",onClick:()=>a(t)},n.a.createElement("i",{className:"fa fa-lg fa-repeat"})),n.a.createElement(ye.a,{placement:"right",target:"RefreshButton"},"Refresh Files")),n.a.createElement("div",{className:"flex-grow-1 pl-1 pr-1 pr-lg-3 pl-lg-3"},n.a.createElement(Fe.a,{inline:!0,onSubmit:this.onSubmitUrlChange,className:"h-100"},n.a.createElement(he.a,{style:{width:"100%"},value:b,onChange:this.onChangeTrial,onFocus:this.onFocusHandle,onBlur:this.onBlurHandle}),n.a.createElement(l.a,{className:I?"":"d-none",color:"link",type:"submit",style:{marginLeft:"-45px"}},n.a.createElement("i",{className:"fa fa-arrow-right"})))),n.a.createElement("div",{className:"d-flex flex-wrap"},n.a.createElement(l.a,{className:"mr-1 btn-explorer-action p-1",id:"CreateFolderButton",onClick:this.openNewFolderModal},n.a.createElement("img",{src:Ue.a,alt:"New Folder",className:"fa fa-lg"})," "),n.a.createElement(ye.a,{placement:"bottom",target:"CreateFolderButton"},"Create a new Folder"),n.a.createElement(we.a,{isOpen:g,toggle:this.toggleDropDown,direction:"down",id:"FilterButton"},n.a.createElement($.a,{className:"btn-explorer-action"},n.a.createElement("i",{className:"fa fa-lg fa-filter"})),n.a.createElement(ee.a,null,n.a.createElement(te.a,{key:"None",value:"",onClick:this.handleChangeFilter},"None"),this.filterOptions.map((e,t)=>n.a.createElement(te.a,{key:e,value:e,onClick:this.handleChangeFilter},e)))),n.a.createElement(l.a,{className:"btn-explorer-action",id:"ListViewButton",onClick:this.handleChangeGridMode},n.a.createElement("i",{className:"fa fa-lg "+("card"===r?"fa-list":"fa-th-large")})),n.a.createElement(ye.a,{placement:"right",target:"ListViewButton"},"card"===r?"List View":"Card View"),n.a.createElement(l.a,{className:"btn-explorer-action",id:"InfoButton",onClick:this.toggleAboutModal},n.a.createElement("i",{className:"fa fa-lg fa-info"})),n.a.createElement(ye.a,{placement:"right",target:"InfoButton"},"Show Remote Info"),n.a.createElement(Le,{currentPath:d,buttonLabel:"Upload",buttonClass:"btn-explorer-action"}),n.a.createElement(Fe.a,{inline:!0},n.a.createElement(Se.a,null,f&&n.a.createElement(he.a,{type:"text",placeholder:"Search",value:m,className:"animate-fade-in",onChange:this.changeSearch}),n.a.createElement(l.a,{color:"",className:"mr-1 btn-explorer-action",onClick:this.handleSearchOpen},n.a.createElement("i",{className:"fa fa-lg "+(f?"fa-close":"fa-search")})))),n.a.createElement(De,{containerID:t,isVisible:p,closeModal:this.closeNewFolderModal}),n.a.createElement(T.a,{isOpen:E,toggle:this.toggleAboutModal},n.a.createElement(me.a,null,"Status for ",C),n.a.createElement(de.a,null,n.a.createElement(o.a,null,n.a.createElement(s.a,{sm:12},n.a.createElement("div",{className:"chart-wrapper"},n.a.createElement("p",null,"Space Usage (in GB)"),h&&!Object(M.j)(h)?n.a.createElement(Pe.a,{data:h}):n.a.createElement(n.a.Fragment,null,n.a.createElement(R.a,{color:"primary"}),"Loading")))),n.a.createElement(o.a,null,n.a.createElement(s.a,{sm:12},n.a.createElement(l.a,{color:"danger",onClick:this.handleCleanTrash},"Clean Trash ",n.a.createElement("i",{className:"fa fa-lg fa-trash"}))))),n.a.createElement(ue.a,null))))}}const Je=Object(be.a)((e,t)=>t.containerID,(e,t)=>e.providerStatus.about[t.containerID],(e,t)=>{if(!t)return{};let a=[],r=[];for(var n=0,o=Object.entries(t);n<o.length;n++){const e=Object(B.a)(o[n],2),t=e[0],l=e[1];"total"!==t&&(a.push(t),r.push(Object(M.b)(l).toFixed(2)))}return a.length>1&&r.length>1?{labels:a,datasets:[{data:r,backgroundColor:["#FF6384","#36A2EB","#FFCE56","#ff7459"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#ff7459"]}]}:{}}),He=Object(be.a)((e,t)=>t.containerID,(e,t)=>e.explorer.currentPaths[t.containerID],(e,t)=>e.remote.configs,(e,t,a)=>t&&a&&a[t.remoteName]?a[t.remoteName]:{});var Ze=Object(i.b)((e,t)=>{let a=Je(e,t),r=He(e,t);return{visibilityFilter:e.explorer.visibilityFilters[t.containerID],loadImages:e.explorer.loadImages[t.containerID],currentPath:e.explorer.currentPaths[t.containerID],gridMode:e.explorer.gridMode[t.containerID],searchQuery:e.explorer.searchQueries[t.containerID],fsInfo:r,doughnutData:a,numCols:e.remote.numCols}},{changeVisibilityFilter:c.f,changeGridMode:c.a,navigateBack:c.i,navigateFwd:c.j,getFilesForContainerID:c.h,setSearchQuery:c.n,getAboutRemote:e=>(t,a)=>{let r=a().explorer.currentPaths[e].remoteName;r&&(Object(M.k)(r)||(r=Object(M.a)(r)),t({type:Y.z,status:Y.L,id:e,payload:{}}),O.a.post(Re.a.getAbout,{fs:r}).then(a=>{t({type:Y.z,status:Y.L,id:e,payload:a.data})},a=>{t({type:Y.z,status:Y.J,id:e,error:a})}))},setLoadImages:c.m,changePath:c.b})(Qe),qe=a(334);class Ye extends n.a.Component{constructor(e){super(e),this.handleChangeRemoteName=e=>{const t=this.props,a=t.changeRemoteName,r=t.containerID,n=t.getFsInfo;a(r,e),n(e)},this.state={remoteNameTemp:""},this.updateRemoteName=this.updateRemoteName.bind(this),this.updateRemotePath=this.updateRemotePath.bind(this)}updateRemoteName(e){this.setState({remoteNameTemp:e})}updateRemotePath(e,t,a){const r=this.props.currentPath.remoteName;let n="",o="";a?(n=Object(M.a)(r)+e,o=""):t&&(n=r,o=e),this.props.changePath(this.props.containerID,n,o)}render(){const e=this.props.currentPath.remoteName,t=this.props,a=t.containerID,r=t.className,o=e&&""!==e;return n.a.createElement(d.a,null,n.a.createElement(A.a,{className:r},n.a.createElement(k.a,null,n.a.createElement(y.a,{fluid:!0},o?n.a.createElement(n.a.Fragment,null,n.a.createElement(Ze,{containerID:a}),n.a.createElement(ke,{containerID:a})):n.a.createElement(qe.a,{remoteName:e,containerID:a,handleChangeRemoteName:this.handleChangeRemoteName})))))}}Ye.defaultProps={};var Ge=Object(i.b)((e,t)=>{const a=e.explorer.currentPaths[t.containerID];let r={};const n=a.remoteName;if(a&&e.remote.configs){const t=n.split(":")[0];e.remote.configs[t]&&(r=e.remote.configs[t])}return{configs:e.remote.configs,hasError:e.remote.hasError,error:e.remote.error,currentPath:a,fsInfo:r}},{createPath:c.g,changePath:c.b,changeRemoteName:c.c,changeRemotePath:c.d,navigateUp:c.k,navigateBack:c.i,navigateFwd:c.j,getFsInfo:m.f})(Ye);var Xe=({numCols:e,activeRemoteContainerID:t,distractionFreeMode:a,containers:r})=>{let l=[];const i=12/e;for(let c=0;c<e;c++)l.push(n.a.createElement(s.a,{lg:i,key:c},n.a.createElement(o.a,null,n.a.createElement(s.a,{lg:12},n.a.createElement(N,{paneID:c}))),r.map(({ID:e,paneID:r})=>r===c?n.a.createElement(Ge,{containerID:e,key:e,className:t&&t[c]&&t[c]!==e?"d-none":"",distractionFreeMode:a}):null)));return l};class ze extends n.a.Component{constructor(...e){super(...e),this.changeLayout=(e,t)=>{const a=this.props.changeNumCols;e!==a&&a(e,t)},this.toggleDistractionFreeMode=e=>{const t=this.props,a=t.distractionFreeMode;(0,t.changeDistractionFreeMode)(!a)}}componentDidMount(){const e=this.props,t=e.numContainers,a=e.addRemoteContainer;t<1&&a(0)}render(){const e=this.props,t=e.numCols,a=e.distractionFreeMode,r=e.activeRemoteContainerID,i=e.containers;return n.a.createElement(d.a,null,n.a.createElement(Te.a,{backend:Me.a},n.a.createElement(o.a,{className:"d-none d-md-block","data-test":"remoteExplorerLayout"},a&&n.a.createElement("div",{className:"clearfix float-right"},n.a.createElement(l.a,{color:"success",className:"ml-2",onClick:this.toggleDistractionFreeMode},n.a.createElement("i",{className:"fa fa-arrows"}))),!a&&n.a.createElement(s.a,{sm:12,lg:12,className:"mb-3 d-none d-md-block"},n.a.createElement("span",{className:"text-choose-layout"},"Choose Layout: ","  "),n.a.createElement(l.a,{color:"primary",className:"ml-2 layout-change-button",onClick:()=>this.changeLayout(1,"horizontal")},n.a.createElement("img",{style:{height:24},src:u.a,alt:"Single Vertical Pane"})),n.a.createElement(l.a,{color:"primary",className:"ml-2 layout-change-button",onClick:()=>this.changeLayout(2,"horizontal")},n.a.createElement("img",{style:{height:24},src:g.a,alt:"Double Vertical Pane"})),n.a.createElement(l.a,{color:"primary",className:"ml-2 layout-change-button",onClick:()=>this.changeLayout(3,"horizontal")},n.a.createElement("img",{style:{height:24},src:f.a,alt:"Triple Vertical Pane"})),n.a.createElement(l.a,{color:"success",className:"ml-2",onClick:this.toggleDistractionFreeMode},n.a.createElement("i",{className:"fa fa-arrows"})," Full Screen"))),n.a.createElement(o.a,null,n.a.createElement(Xe,{numCols:t,distractionFreeMode:a,activeRemoteContainerID:r,containers:i}))))}}t.default=Object(i.b)(e=>({backStacks:e.explorer.backStacks,numCols:e.remote.numCols,numContainers:e.remote.numContainers,distractionFreeMode:e.remote.distractionFreeMode,splitMode:e.remote.splitMode,activeRemoteContainerID:e.remote.activeRemoteContainerID,containers:e.remote.containers}),{createPath:c.g,changeNumCols:m.d,changeDistractionFreeMode:m.c,addRemoteContainer:m.a})(ze)}}]);
//# sourceMappingURL=11.746c663a.chunk.js.map